# Supabase é›†æˆå¿«é€Ÿå¼€å§‹æŒ‡å—

## âœ… å®Œæˆçš„æ­¥éª¤

- âœ… Supabaseå®¢æˆ·ç«¯åº“å®‰è£…
- âœ… æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡
- âœ… è®¤è¯ä¸Šä¸‹æ–‡åˆ›å»º
- âœ… APIæœåŠ¡å°è£…
- âœ… æ–‡ç« ç¼–è¾‘å™¨é¡µé¢
- âœ… è·¯ç”±é›†æˆ

## ğŸ“‹ æ¥ä¸‹æ¥éœ€è¦åšçš„

### 1ï¸âƒ£ Supabaseé¡¹ç›®è®¾ç½®

#### 1. åˆ›å»ºSupabaseé¡¹ç›®
```bash
è®¿é—® https://supabase.com
ç‚¹å‡»"Start your project"
ç”¨GitHubè´¦å·ç™»å½•
åˆ›å»ºé¡¹ç›®ï¼š
  - Project Name: showhub
  - Database Password: MDSMynuB38uOx50q
  - Region: é€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„åŒºåŸŸ
```

#### 2. åœ¨Supabase SQL Editoræ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
```bash
åœ¨ supabase/migrations/001_init_schema.sql ä¸­çš„æ‰€æœ‰SQL
å¤åˆ¶åˆ°Supabaseé¡¹ç›®çš„SQL Editorä¸­è¿è¡Œ
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡
```bash
# åœ¨ .env.local ä¸­å¡«å…¥ä½ çš„Supabaseå‡­è¯
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
```

#### 4. åˆ›å»ºStorage Bucket
åœ¨Supabaseæ§åˆ¶é¢æ¿ï¼š
- å» Storage â†’ Buckets
- åˆ›å»ºæ–°Bucketï¼š`article-images`
- è®¾ç½®ä¸ºå…¬å¼€ï¼ˆPublicï¼‰

### 2ï¸âƒ£ å¾®ä¿¡ç™»å½•é›†æˆï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦å¾®ä¿¡ç™»å½•ï¼Œéœ€è¦ï¼š

```bash
1. å»å¾®ä¿¡å¼€æ”¾å¹³å°ç”³è¯·åº”ç”¨
2. è·å– APPID å’Œ SECRET
3. é…ç½®å›è°ƒURLåˆ°ä½ çš„æœåŠ¡å™¨
4. å®ç°åç«¯éªŒè¯APIç«¯ç‚¹ï¼š
   POST /api/auth/wechat
   {
     code: "å¾®ä¿¡æˆæƒç ",
     state: "é˜²CSRF token"
   }
5. è¿”å›JWT tokenç»™å‰ç«¯
```

ç›®å‰ä»£ç ä½¿ç”¨stubå®ç°ï¼Œå¯ä»¥å…ˆç”¨Supabaseå†…ç½®è®¤è¯æµ‹è¯•ã€‚

### 3ï¸âƒ£ Markdownç¼–è¾‘å™¨é›†æˆ

å®‰è£…ç¼–è¾‘å™¨ï¼š
```bash
npm install react-markdown-editor-lite marked
# æˆ–è€…
npm install @toast-ui/react-editor
```

ç„¶ååœ¨ ArticleEditorPage.tsx ä¸­é›†æˆã€‚

### 4ï¸âƒ£ æµ‹è¯•æµç¨‹

```bash
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
   npm run dev

2. æµ‹è¯•æ•°æ®åº“è¿æ¥
   è®¿é—® /articles/new
   æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰Supabaseè¿æ¥é”™è¯¯

3. æµ‹è¯•æ–‡ç« åˆ›å»º
   å¡«å†™è¡¨å•å¹¶ä¿å­˜ä¸ºè‰ç¨¿

4. éªŒè¯æ•°æ®åº“
   åœ¨Supabaseæ§åˆ¶é¢æ¿ â†’ Database â†’ articles æŸ¥çœ‹æ•°æ®
```

## ğŸ”‘ é‡è¦äº‹é¡¹

1. **RLSå®‰å…¨ç­–ç•¥**ï¼šå·²å¯ç”¨è¡Œçº§å®‰å…¨ï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½çœ‹åˆ°å‘å¸ƒçš„æ–‡ç« ï¼Œç¼–è¾‘è‡ªå·±çš„æ–‡ç« 

2. **è®¤è¯çŠ¶æ€**ï¼šä½¿ç”¨AuthContextç®¡ç†å…¨å±€è®¤è¯çŠ¶æ€ï¼Œæ‰€æœ‰å—ä¿æŠ¤é¡µé¢éƒ½ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•

3. **å›¾ç‰‡ä¸Šä¼ **ï¼šä½¿ç”¨Supabase Storageï¼Œå‰ç«¯ç›´ä¼ ï¼Œå‡è½»æœåŠ¡å™¨å‹åŠ›

4. **ç¯å¢ƒå˜é‡**ï¼š
   - `VITE_SUPABASE_URL`ï¼šå…¬å¼€ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯æš´éœ²
   - `VITE_SUPABASE_ANON_KEY`ï¼šæœ‰é™æƒé™çš„å…¬é’¥ï¼ŒRLSä¼šä¿æŠ¤æ•°æ®
   - `SUPABASE_SERVICE_KEY`ï¼šåç«¯ä¸“ç”¨ï¼Œæ°¸è¿œä¸è¦æš´éœ²ç»™å®¢æˆ·ç«¯

## ğŸ“š æ–‡ä»¶ç»“æ„

```
src/
  â”œâ”€â”€ services/
  â”‚   â””â”€â”€ supabase.ts              # Supabaseå®¢æˆ·ç«¯å’ŒAPIæœåŠ¡
  â”œâ”€â”€ contexts/
  â”‚   â””â”€â”€ AuthContext.tsx          # è®¤è¯ä¸Šä¸‹æ–‡
  â”œâ”€â”€ pages/
  â”‚   â”œâ”€â”€ ArticleEditorPage.tsx    # æ–‡ç« ç¼–è¾‘å™¨
  â”‚   â””â”€â”€ ArticleEditorPage.css
  â””â”€â”€ App.tsx                      # æ·»åŠ äº†AuthProviderå’Œæ–°è·¯ç”±
```

## ğŸš€ ä¸‹ä¸€æ­¥

1. é…ç½®Supabaseå®Œæˆåè¿è¡Œåº”ç”¨æµ‹è¯•
2. é›†æˆMarkdownç¼–è¾‘å™¨æå‡ç”¨æˆ·ä½“éªŒ
3. å®ç°å¾®ä¿¡ç™»å½•ï¼ˆå¯é€‰ï¼‰
4. æ·»åŠ æ–‡ç« åˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µ
5. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
- Supabaseé¡¹ç›®æ˜¯å¦åˆ›å»ºæˆåŠŸ
- .env.localä¸­çš„å‡­è¯æ˜¯å¦æ­£ç¡®
- Supabase Storageä¸­article-images bucketæ˜¯å¦åˆ›å»º
- RLSç­–ç•¥æ˜¯å¦æ­£ç¡®å¯ç”¨

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸ‰
