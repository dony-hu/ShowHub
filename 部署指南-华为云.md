# ShowHub 华为云部署指南

项目已成功构建，生产文件位于 `dist/` 目录。以下是部署到华为云的几种方案：

## 方案一：OBS 对象存储静态网站托管（推荐）

### 1. 创建 OBS 桶
1. 登录华为云控制台
2. 进入「对象存储服务 OBS」
3. 点击「创建桶」
   - 桶名称：showhub（或自定义）
   - 区域：选择离用户最近的区域
   - 数据冗余存储策略：标准存储
   - 桶策略：公共读

### 2. 上传文件
1. 进入创建的桶
2. 点击「上传对象」
3. 将 `dist/` 目录下的所有文件上传（包括 index.html、assets 文件夹等）

### 3. 配置静态网站托管
1. 在桶详情页，选择「基础配置」→「静态网站托管」
2. 点击「配置」
   - 默认首页：index.html
   - 默认404页面：index.html（用于 SPA 路由）
3. 保存配置

### 4. 绑定自定义域名（可选）
1. 在「域名管理」中添加自定义域名
2. 在域名服务商处添加 CNAME 记录
3. 配置 HTTPS 证书（推荐）

### 访问地址
配置完成后，可通过以下地址访问：
- OBS 默认域名：`http://showhub.obs-website.cn-north-4.myhuaweicloud.com`
- 自定义域名：配置后的域名

---

## 方案二：CCE 云容器引擎

### 1. 创建 Dockerfile
```dockerfile
FROM nginx:alpine
COPY dist/ /usr/share/nginx/html/
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### 2. 创建 nginx.conf
```nginx
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /assets {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### 3. 构建并推送镜像
```bash
# 登录华为云容器镜像服务
docker login swr.cn-north-4.myhuaweicloud.com

# 构建镜像
docker build -t swr.cn-north-4.myhuaweicloud.com/your-org/showhub:latest .

# 推送镜像
docker push swr.cn-north-4.myhuaweicloud.com/your-org/showhub:latest
```

### 4. 在 CCE 中部署
1. 创建工作负载（Deployment）
2. 选择上传的镜像
3. 配置服务暴露（LoadBalancer）

---

## 方案三：ECS 云服务器 + Nginx

### 1. 购买 ECS 实例
- 操作系统：Ubuntu 20.04 或 CentOS 7+
- 配置：1核2G 即可（根据访问量调整）

### 2. 安装 Nginx
```bash
# Ubuntu
sudo apt update
sudo apt install nginx -y

# CentOS
sudo yum install nginx -y
```

### 3. 上传文件
```bash
# 将 dist 目录打包
tar -czf dist.tar.gz dist/

# 使用 scp 上传到服务器
scp dist.tar.gz root@your-server-ip:/var/www/

# 在服务器上解压
ssh root@your-server-ip
cd /var/www/
tar -xzf dist.tar.gz
mv dist showhub
```

### 4. 配置 Nginx
```bash
# 编辑 Nginx 配置
sudo nano /etc/nginx/sites-available/showhub

# 添加以下配置：
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/showhub;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /assets {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    gzip on;
    gzip_types text/css application/javascript application/json;
}

# 启用站点
sudo ln -s /etc/nginx/sites-available/showhub /etc/nginx/sites-enabled/

# 测试配置
sudo nginx -t

# 重启 Nginx
sudo systemctl restart nginx
```

### 5. 配置防火墙
```bash
# 开放 80 和 443 端口
sudo ufw allow 80
sudo ufw allow 443
```

---

## 推荐配置

### CDN 加速
建议在华为云 CDN 中配置加速域名，提升全国访问速度：
1. 进入「CDN」服务
2. 添加加速域名
3. 配置源站（OBS 或 ECS）
4. 配置 HTTPS 证书

### SSL 证书
推荐使用华为云「SSL证书管理」申请免费 DV 证书。

---

## 快速开始（OBS 方式）

```bash
# 1. 构建已完成，文件在 dist/ 目录

# 2. 安装华为云 CLI 工具（可选）
pip install esdk-obs-python

# 3. 使用 OBS 浏览器上传
#    或使用命令行工具批量上传
```

---

## 估算成本（以 OBS 方案为例）

- OBS 存储费用：~0.5元/月（10GB 以内）
- 流量费用：~0.5元/GB
- CDN 加速：首年赠送 200GB 流量
- 总计：小型项目月成本 < 10元

---

## 注意事项

1. **路由配置**：项目使用 React Router，需确保所有路由都返回 index.html
2. **CORS 配置**：如果使用外部 API，需配置 CORS
3. **环境变量**：生产环境的 API 地址需要在构建前配置
4. **监控告警**：建议配置华为云监控服务
5. **备案要求**：如使用国内服务器，域名需完成 ICP 备案

---

## 需要帮助？

如需进一步协助部署，请提供：
- 选择的部署方案
- 华为云账号区域
- 是否有自定义域名
